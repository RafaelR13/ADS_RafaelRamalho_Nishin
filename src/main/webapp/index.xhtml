<?xml version="1.0" encoding="UTF-8"?>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/Html.html to edit this template
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Nishin Store</title>
    <h:outputStylesheet library="css" name="base.css"/>
    <h:outputStylesheet library="css" name="index.css"/>
</h:head>

<h:body>
    <h:form id="frmPrincipal">
        <!-- ===== HEADER ===== -->
        <header>
            <div class="logo">
                <h:outputLink value="index.xhtml" styleClass="logo-link">
                    <p:graphicImage library="images" name="nishin-logo.png" alt="Logo" styleClass="logo-img"/>
                </h:outputLink>
            </div>

            <h2>Nishin Store</h2>

            <div class="actions">
                <h:panelGroup rendered="#{loginController.logado}">
                    <h:outputText value="Bem-vindo, #{loginController.usuarioLogado.nome}"
                                  style="margin-right:10px; color:#fff; font-weight:bold;"/>
                    <p:commandButton value="Sair" icon="pi pi-sign-out"
                                     action="#{loginController.logout}"
                                     styleClass="ui-button-danger"/>
                </h:panelGroup>

                <h:panelGroup rendered="#{!loginController.logado}">
                    <p:commandButton value="Login / Cadastro"
                                     action="login.xhtml?faces-redirect=true"
                                     icon="pi pi-user"/>
                </h:panelGroup>

                <p:commandButton value="Carrinho" icon="pi pi-shopping-cart"
                                 action="#{carrinhoController.irParaCarrinho}"
                                 ajax="false"/>
            </div>
        </header>

        <!-- ===== PRODUTOS ===== -->
        <div class="main-container">
            <h3>Produtos em Destaque</h3>

            <p:dataGrid id="gridProdutos" value="#{produtoController.produtoList}" var="p" columns="3"
                        paginator="true" rows="6" layout="grid"
                        paginatorPosition="bottom"
                        emptyMessage="Nenhum produto disponÃ­vel no momento.">

                <!-- ðŸ”¹ Produto clicÃ¡vel -->
                <p:commandLink action="#{produtoController.visualizarProduto(p)}"
                               ajax="false"
                               style="text-decoration:none; color:inherit;">
                    <p:panel styleClass="produto-card" style="cursor:pointer;">
                        <div class="produto-imagem">
                            <p:graphicImage value="#{p.imagem}"
                                            style="width:100%; height:180px; object-fit:cover; border-radius:8px;" />
                        </div>
                        <h:outputText value="#{p.nome}" style="display:block; margin-top:10px; font-weight:bold;" />
                    </p:panel>
                </p:commandLink>

            </p:dataGrid>

            <p:growl id="growl" showDetail="true" life="4000"/>
        </div>

        <!-- ===== FOOTER ===== -->
        <footer>
            <h:panelGroup rendered="#{loginController.usuarioLogado != null and loginController.usuarioLogado.admin}">
                <p:commandButton value="ConfiguraÃ§Ãµes"
                                 icon="pi pi-cog"
                                 action="admin.xhtml?faces-redirect=true"
                                 styleClass="admin-config-btn" />
            </h:panelGroup>
            <p:outputLabel value="Â© 2025 Nishin Store" styleClass="footer-text"/>
        </footer>
    </h:form>
</h:body>
</html>
